<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="mb-6">
    <%= link_to admin_flash_sale_path(@flash_sale), class: "inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300" do %>
      <%= icon "arrow-left", class: "h-4 w-4 mr-1" %>
      Back to Flash Sale
    <% end %>
  </div>

  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Add Products to <%= @flash_sale.name %></h1>
  </div>

  <div class="bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-lg font-medium leading-6 text-gray-900 dark:text-white">
        Select Products
      </h3>
      <p class="mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400">
        Choose products to add to this flash sale and set their discount.
      </p>
    </div>
    
    <%= form_with url: add_product_admin_flash_sale_path(@flash_sale), method: :post, class: "px-4 py-5 sm:p-6 space-y-6" do |form| %>
      <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
        <div class="sm:col-span-6">
          <%= form.label :product_ids, "Products", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
          <div class="mt-1">
            <%= form.collection_select :product_ids, @products, :id, :name, { include_hidden: false }, { multiple: true, size: 10, class: "shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md" } %>
          </div>
          <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Hold Ctrl/Cmd to select multiple products.</p>
        </div>

        <div class="sm:col-span-3">
          <%= form.label :discount_value, "Discount Value", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
          <div class="mt-1">
            <%= form.number_field :discount_value, step: "0.01", min: 0, class: "shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md", placeholder: "20" %>
          </div>
          <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">For percentage, enter a number between 0 and 100. For fixed amount, enter the amount in GHS.</p>
        </div>

        <div class="sm:col-span-3">
          <%= form.label :discount_type, "Discount Type", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
          <div class="mt-1">
            <%= form.select :discount_type, [["Percentage", "percentage"], ["Fixed Amount", "fixed_amount"]], {}, class: "shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md" %>
          </div>
        </div>

        <div class="sm:col-span-3">
          <%= form.label :quantity_limit, "Quantity Limit", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
          <div class="mt-1">
            <%= form.number_field :quantity_limit, min: 0, class: "shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md", placeholder: "100" %>
          </div>
          <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Maximum quantity available for this flash sale. Leave blank for unlimited.</p>
        </div>
      </div>

      <div class="pt-5 border-t border-gray-200 dark:border-gray-700">
        <div class="flex justify-end">
          <%= link_to "Cancel", admin_flash_sale_path(@flash_sale), class: "inline-flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500" %>
          <%= form.submit "Add Products", class: "ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
