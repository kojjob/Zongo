<div class="max-w-md mx-auto py-12">
  <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
    <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-6">Create Your Account</h2>
    
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
      <div class="mb-5">
        <%= f.label :phone, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" %>
        <div class="relative">
          <%= f.telephone_field :phone, placeholder: "e.g. +233 20 123 4567", class: "w-full py-3 px-4 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500" %>
        </div>
        <% if @user.errors[:phone].any? %>
          <p class="mt-2 text-sm text-red-600"><%= @user.errors[:phone].join(", ") %></p>
        <% end %>
        <p class="mt-1 text-xs text-gray-500">We'll send a verification code to this number</p>
      </div>
      <div class="relative group w-32 h-32 rounded-full overflow-hidden mb-4" data-controller="avatar-preview">
        <div class="w-full h-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-600 dark:text-primary-400 text-4xl font-bold initials-placeholder">
          <!-- Generic placeholder instead of trying to use initials -->
          <span>ZG</span> <!-- For "Zongo" perhaps, or whatever makes sense for your app -->
        </div>
        <img src="" class="w-full h-full object-cover hidden" data-avatar-preview-target="preview">
        
        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
          <label for="user_avatar" class="cursor-pointer text-white text-sm font-medium">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0118.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            Change Avatar
          </label>
        </div>
        
        <%= f.file_field :avatar, class: "hidden", accept: "image/jpeg,image/png,image/gif", id: "user_avatar", data: { avatar_preview_target: "input" } %>
      </div>
      
      <div class="mb-5">
        <%= f.label :email, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" %>
        <div class="relative">
          <%= f.email_field :email, placeholder: "example@mail.com", class: "w-full py-3 px-4 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500" %>
        </div>
      </div>
      
      <div class="mb-5">
        <%= f.label :password, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" %>
        <%= f.password_field :password, class: "w-full py-3 px-4 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500" %>
        <% if @user.errors[:password].any? %>
          <p class="mt-2 text-sm text-red-600"><%= @user.errors[:password].join(", ") %></p>
        <% end %>
      </div>
      
      <div class="mb-5">
        <%= f.label :password_confirmation, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" %>
        <%= f.password_field :password_confirmation, class: "w-full py-3 px-4 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500" %>
        <% if @user.errors[:password_confirmation].any? %>
          <p class="mt-2 text-sm text-red-600"><%= @user.errors[:password_confirmation].join(", ") %></p>
        <% end %>
      </div>
      
      <div class="mb-6 flex items-center">
        <input type="checkbox" id="terms" name="terms" required class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded">
        <label for="terms" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">
          I agree to the <a href="#" class="text-primary-600 hover:text-primary-500">Terms of Service</a> and <a href="#" class="text-primary-600 hover:text-primary-500">Privacy Policy</a>
        </label>
      </div>
      
      <%= f.submit "Continue", class: "w-full py-4 rounded-xl bg-primary-600 hover:bg-primary-700 text-white font-medium text-base transition-colors" %>
    <% end %>
    
    <div class="mt-6 text-center">
      <p class="text-sm text-gray-600 dark:text-gray-400">
        Already have an account? <%= link_to "Sign in", new_user_session_path, class: "text-primary-600 hover:text-primary-500" %>
      </p>
    </div>
  </div>
</div>