<%# Appearance Settings %>
<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="mb-6">
    <h1 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">Appearance Settings</h1>
    <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Customize how your app looks and feels</p>
  </div>

  <%# Tabs Navigation %>
  <div class="mb-6 border-b border-gray-200 dark:border-gray-700">
    <div class="flex flex-wrap -mb-px">
      <%= link_to user_settings_path, class: "inline-block py-4 px-4 text-center border-b-2 font-medium text-sm #{current_page?(user_settings_path) ? 'border-primary-500 text-primary-600 dark:text-primary-500' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'}" do %>
        <%= icon "user", class: "w-5 h-5 inline-block mr-2" %>
        Overview
      <% end %>
      
      <%= link_to user_settings_profile_path, class: "inline-block py-4 px-4 text-center border-b-2 font-medium text-sm #{current_page?(user_settings_profile_path) ? 'border-primary-500 text-primary-600 dark:text-primary-500' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'}" do %>
        <%= icon "profile", class: "w-5 h-5 inline-block mr-2" %>
        Profile
      <% end %>
      
      <%= link_to user_settings_security_path, class: "inline-block py-4 px-4 text-center border-b-2 font-medium text-sm #{current_page?(user_settings_security_path) ? 'border-primary-500 text-primary-600 dark:text-primary-500' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'}" do %>
        <%= icon "shield-check", class: "w-5 h-5 inline-block mr-2" %>
        Security
      <% end %>
      
      <%= link_to user_settings_notifications_path, class: "inline-block py-4 px-4 text-center border-b-2 font-medium text-sm #{current_page?(user_settings_notifications_path) ? 'border-primary-500 text-primary-600 dark:text-primary-500' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'}" do %>
        <%= icon "bell", class: "w-5 h-5 inline-block mr-2" %>
        Notifications
      <% end %>
      
      <%= link_to user_settings_appearance_path, class: "inline-block py-4 px-4 text-center border-b-2 font-medium text-sm #{current_page?(user_settings_appearance_path) ? 'border-primary-500 text-primary-600 dark:text-primary-500' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'}" do %>
        <%= icon "paint-brush", class: "w-5 h-5 inline-block mr-2" %>
        Appearance
      <% end %>
      
      <%= link_to user_settings_payment_path, class: "inline-block py-4 px-4 text-center border-b-2 font-medium text-sm #{current_page?(user_settings_payment_path) ? 'border-primary-500 text-primary-600 dark:text-primary-500' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'}" do %>
        <%= icon "money", class: "w-5 h-5 inline-block mr-2" %>
        Payment
      <% end %>
      
      <%= link_to user_settings_support_path, class: "inline-block py-4 px-4 text-center border-b-2 font-medium text-sm #{current_page?(user_settings_support_path) ? 'border-primary-500 text-primary-600 dark:text-primary-500' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'}" do %>
        <%= icon "support", class: "w-5 h-5 inline-block mr-2" %>
        Support
      <% end %>
    </div>
  </div>

  <%= form_with url: user_settings_update_appearance_path, method: :patch, local: true do |form| %>
    <%# Theme Settings %>
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden mb-6">
      <div class="p-6">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">Theme Settings</h2>
        
        <div class="space-y-8">
          <div>
            <h3 class="text-base font-medium text-gray-900 dark:text-white mb-4">Color Mode</h3>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4" data-controller="theme">
              <label class="relative block cursor-pointer">
                <% user_setting = current_user.setting || UserSetting.new(user: current_user) %>
              <input type="radio" name="user[settings][theme_preference]" value="light" class="sr-only" data-action="click->theme#setMode" data-theme-param="light" <%= user_setting.theme_preference == 'light' ? 'checked' : '' %>>
                <div class="h-full w-full rounded-lg border-2 <%= user_setting.theme_preference == 'light' ? 'border-primary-500' : 'border-gray-200 dark:border-gray-700' %> p-3">
                  <div class="w-full h-32 rounded-md bg-white border border-gray-200 overflow-hidden">
                    <div class="h-6 w-full bg-gray-100 flex items-center px-2">
                      <div class="h-2 w-2 rounded-full bg-red-500 mr-1"></div>
                      <div class="h-2 w-2 rounded-full bg-yellow-500 mr-1"></div>
                      <div class="h-2 w-2 rounded-full bg-green-500"></div>
                    </div>
                    <div class="p-2">
                      <div class="h-4 w-24 bg-gray-200 rounded mb-2"></div>
                      <div class="h-3 w-32 bg-gray-200 rounded mb-1"></div>
                      <div class="h-3 w-36 bg-gray-200 rounded mb-1"></div>
                      <div class="h-3 w-28 bg-gray-200 rounded"></div>
                    </div>
                  </div>
                  <div class="mt-2 text-center">
                    <span class="text-sm font-medium text-gray-900 dark:text-white">Light Mode</span>
                  </div>
                  <% if user_setting.theme_preference == 'light' %>
                    <div class="absolute -top-2 -right-2 h-6 w-6 rounded-full bg-primary-500 flex items-center justify-center">
                      <%= icon "check", class: "h-4 w-4 text-white" %>
                    </div>
                  <% end %>
                </div>
              </label>
              
              <label class="relative block cursor-pointer">
                <input type="radio" name="user[settings][theme_preference]" value="dark" class="sr-only" data-action="click->theme#setMode" data-theme-param="dark" <%= user_setting.theme_preference == 'dark' ? 'checked' : '' %>>
                <div class="h-full w-full rounded-lg border-2 <%= user_setting.theme_preference == 'dark' ? 'border-primary-500' : 'border-gray-200 dark:border-gray-700' %> p-3">
                  <div class="w-full h-32 rounded-md bg-gray-900 border border-gray-700 overflow-hidden">
                    <div class="h-6 w-full bg-gray-800 flex items-center px-2">
                      <div class="h-2 w-2 rounded-full bg-red-500 mr-1"></div>
                      <div class="h-2 w-2 rounded-full bg-yellow-500 mr-1"></div>
                      <div class="h-2 w-2 rounded-full bg-green-500"></div>
                    </div>
                    <div class="p-2">
                      <div class="h-4 w-24 bg-gray-700 rounded mb-2"></div>
                      <div class="h-3 w-32 bg-gray-700 rounded mb-1"></div>
                      <div class="h-3 w-36 bg-gray-700 rounded mb-1"></div>
                      <div class="h-3 w-28 bg-gray-700 rounded"></div>
                    </div>
                  </div>
                  <div class="mt-2 text-center">
                    <span class="text-sm font-medium text-gray-900 dark:text-white">Dark Mode</span>
                  </div>
                  <% if user_setting.theme_preference == 'dark' %>
                    <div class="absolute -top-2 -right-2 h-6 w-6 rounded-full bg-primary-500 flex items-center justify-center">
                      <%= icon "check", class: "h-4 w-4 text-white" %>
                    </div>
                  <% end %>
                </div>
              </label>
              
              <label class="relative block cursor-pointer">
                <input type="radio" name="user[settings][theme_preference]" value="system" class="sr-only" data-action="click->theme#setMode" data-theme-param="system" <%= user_setting.theme_preference == 'system' || user_setting.theme_preference.blank? ? 'checked' : '' %>>
                <div class="h-full w-full rounded-lg border-2 <%= user_setting.theme_preference == 'system' || user_setting.theme_preference.blank? ? 'border-primary-500' : 'border-gray-200 dark:border-gray-700' %> p-3">
                  <div class="w-full h-32 rounded-md bg-gradient-to-br from-white to-gray-900 border border-gray-200 dark:border-gray-700 overflow-hidden">
                    <div class="h-full w-full flex items-center justify-center">
                      <%= icon "device-desktop", class: "h-12 w-12 text-gray-500" %>
                    </div>
                  </div>
                  <div class="mt-2 text-center">
                    <span class="text-sm font-medium text-gray-900 dark:text-white">System Default</span>
                  </div>
                  <% if user_setting.theme_preference == 'system' || user_setting.theme_preference.blank? %>
                    <div class="absolute -top-2 -right-2 h-6 w-6 rounded-full bg-primary-500 flex items-center justify-center">
                      <%= icon "check", class: "h-4 w-4 text-white" %>
                    </div>
                  <% end %>
                </div>
              </label>
            </div>
          </div>
          
          <div>
            <h3 class="text-base font-medium text-gray-900 dark:text-white mb-4">Language</h3>
            <div class="max-w-xs">
              <select name="user[settings][language]" class="form-select w-full rounded-lg">
                <option value="en" <%= user_setting.language == 'en' || user_setting.language.blank? ? 'selected' : '' %>>English</option>
                <option value="fr" <%= user_setting.language == 'fr' ? 'selected' : '' %>>Français</option>
                <option value="es" <%= user_setting.language == 'es' ? 'selected' : '' %>>Español</option>
                <option value="zh" <%= user_setting.language == 'zh' ? 'selected' : '' %>>中文</option>
                <option value="ar" <%= user_setting.language == 'ar' ? 'selected' : '' %>>العربية</option>
              </select>
            </div>
          </div>
          
          <div>
            <h3 class="text-base font-medium text-gray-900 dark:text-white mb-4">Currency Display</h3>
            <div class="max-w-xs">
              <select name="user[settings][currency_display]" class="form-select w-full rounded-lg">
                <option value="GHS" <%= user_setting.currency_display == 'GHS' || user_setting.currency_display.blank? ? 'selected' : '' %>>Ghana Cedi (₵)</option>
                <option value="USD" <%= user_setting.currency_display == 'USD' ? 'selected' : '' %>>US Dollar ($)</option>
                <option value="EUR" <%= user_setting.currency_display == 'EUR' ? 'selected' : '' %>>Euro (€)</option>
                <option value="GBP" <%= user_setting.currency_display == 'GBP' ? 'selected' : '' %>>British Pound (£)</option>
                <option value="NGN" <%= user_setting.currency_display == 'NGN' ? 'selected' : '' %>>Nigerian Naira (₦)</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <%# Accessibility Settings %>
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden mb-6">
      <div class="p-6">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">Accessibility</h2>
        
        <div class="space-y-8">
          <div>
            <h3 class="text-base font-medium text-gray-900 dark:text-white mb-4">Text Size</h3>
            <div class="relative pt-1">
              <input type="range" min="1" max="5" value="3" class="form-range w-full h-1 bg-gray-200 dark:bg-gray-700 rounded appearance-none cursor-pointer">
              <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2">
                <span>Small</span>
                <span>Default</span>
                <span>Large</span>
              </div>
            </div>
          </div>
          
          <div>
            <h3 class="text-base font-medium text-gray-900 dark:text-white mb-4">Reduce Motion</h3>
            <div class="flex items-center">
              <div class="relative w-12 h-6 mr-2" data-controller="toggle">
                <input type="checkbox" name="reduce_motion" id="reduce_motion" class="toggle-checkbox" data-toggle-target="checkbox" data-action="toggle#toggle"/>
                <label for="reduce_motion" class="toggle-label" data-toggle-target="label"></label>
              </div>
              <span class="text-sm text-gray-700 dark:text-gray-300">Minimize animations throughout the application</span>
            </div>
          </div>
          
          <div>
            <h3 class="text-base font-medium text-gray-900 dark:text-white mb-4">High Contrast Mode</h3>
            <div class="flex items-center">
              <div class="relative w-12 h-6 mr-2" data-controller="toggle">
                <input type="checkbox" name="high_contrast" id="high_contrast" class="toggle-checkbox" data-toggle-target="checkbox" data-action="toggle#toggle"/>
                <label for="high_contrast" class="toggle-label" data-toggle-target="label"></label>
              </div>
              <span class="text-sm text-gray-700 dark:text-gray-300">Increase contrast for better visibility</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="flex justify-end">
      <%= link_to "Cancel", user_settings_path, class: "btn btn-white mr-3" %>
      <%= form.submit "Save Preferences", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>

<style>
  /* Custom toggle switch styles */
  .toggle-checkbox:checked {
    @apply right-0 border-primary-600 transform translate-x-full;
  }
  .toggle-checkbox:checked + .toggle-label {
    @apply bg-primary-600;
  }
</style>
