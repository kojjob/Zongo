<%# app/views/marketplace/category.html.erb %>
<%# Template for displaying specific marketplace categories %>

<div class="bg-white dark:bg-gray-900">
  <!-- Category Header -->
  <div class="relative bg-gradient-to-r from-indigo-600 to-purple-700 overflow-hidden">
    <div class="absolute inset-0 z-0 opacity-30">
      <img src="<%=
        case @category
        when 'electronics'
          'https://images.unsplash.com/photo-1498049794561-7780e7231661?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80'
        when 'fashion'
          'https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80'
        when 'groceries'
          'https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80'
        when 'local'
          'https://images.unsplash.com/photo-1534531173927-aeb928d54385?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80'
        else
          'https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80'
        end
      %>"
           alt="<%= @page_title %> Header" class="w-full h-full object-cover">
    </div>

    <div class="relative z-10 px-4 py-16 sm:px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="text-center">
        <h1 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl lg:text-5xl">
          <%= @page_title %>
        </h1>
        <p class="mt-4 max-w-2xl mx-auto text-lg text-white/90">
          <% case @category %>
          <% when 'electronics' %>
            Browse our collection of the latest electronics, gadgets, and tech accessories.
          <% when 'fashion' %>
            Discover trendy clothing, shoes, and accessories for every style and occasion.
          <% when 'groceries' %>
            Fresh produce, pantry essentials, and specialty foods delivered to your door.
          <% when 'local' %>
            Support local businesses and artisans with our curated local marketplace.
          <% else %>
            Browse our wide selection of products across various categories.
          <% end %>
        </p>
      </div>
    </div>
  </div>

  <!-- Breadcrumbs -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center text-sm">
    <a href="<%= marketplace_path %>" class="text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400">
      Marketplace
    </a>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mx-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
    <span class="text-gray-900 dark:text-white font-medium"><%= @page_title %></span>
  </div>

  <!-- Filters and Sort -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-6">
      <div class="sm:flex sm:items-center sm:justify-between">
        <div class="flex items-center">
          <span class="text-sm font-medium text-gray-700 dark:text-gray-300 mr-3">Filter:</span>
          <div class="relative inline-block text-left mr-4">
            <select class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
              <option>All Prices</option>
              <option>Under GHS 100</option>
              <option>GHS 100 - GHS 500</option>
              <option>GHS 500 - GHS 1000</option>
              <option>Over GHS 1000</option>
            </select>
          </div>

          <div class="relative inline-block text-left">
            <select class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
              <option>All Ratings</option>
              <option>4★ & Up</option>
              <option>3★ & Up</option>
              <option>2★ & Up</option>
              <option>1★ & Up</option>
            </select>
          </div>
        </div>

        <div class="mt-3 sm:mt-0">
          <div class="relative inline-block text-left">
            <select class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
              <option>Sort by: Featured</option>
              <option>Price: Low to High</option>
              <option>Price: High to Low</option>
              <option>Customer Rating</option>
              <option>Newest First</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Products Grid -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
    <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      <% # This would normally come from the database based on the selected category %>
      <% # For demonstration purposes, I'm showing 8 sample products %>
      <% 8.times do |i| %>
        <div class="group relative bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-150 ease-in-out">
          <div class="relative h-64 w-full overflow-hidden bg-gray-200 group-hover:opacity-90 transition">
            <img
              src="<%=
                case @category
                when 'electronics'
                  ['https://images.unsplash.com/photo-1525547719571-a2d4ac8945e2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1546868871-7041f2a55e12?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1585155770447-2f66e2a397b5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1550009158-9ebf69173e03?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80'][i % 4]
                when 'fashion'
                  ['https://images.unsplash.com/photo-1523381294911-8d3cead13475?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1560343090-f0409e92791a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1551232864-3f0890e580d9?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1549298916-b41d501d3772?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80'][i % 4]
                when 'groceries'
                  ['https://images.unsplash.com/photo-1590779033100-9f60a05a013d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1584473457406-6240486418e9?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1553546895-531931aa1aa8?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1594489573123-9d7f71981bc8?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80'][i % 4]
                when 'local'
                  ['https://images.unsplash.com/photo-1465224414649-ceb7f1db3999?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1516975080664-ed2fc6a32937?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1544967082-d9d25d867d66?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
                   'https://images.unsplash.com/photo-1595329088732-25b52056f5ca?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80'][i % 4]
                else
                  'https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80'
                end
              %>"
              alt="Product image" class="h-full w-full object-cover object-center">

            <% if i % 5 == 0 %>
              <div class="absolute top-3 left-3 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded">
                BEST SELLER
              </div>
            <% elsif i % 4 == 0 %>
              <div class="absolute top-3 left-3 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded">
                25% OFF
              </div>
            <% elsif i % 3 == 0 %>
              <div class="absolute top-3 left-3 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">
                NEW
              </div>
            <% end %>
          </div>

          <div class="p-4">
            <div class="flex items-center justify-between">
              <p class="text-sm text-gray-500 dark:text-gray-400">
                <%= @page_title %>
              </p>
              <div class="flex items-center">
                <% 5.times do |j| %>
                  <svg class="h-3 w-3 <%= j < 4 ? 'text-yellow-400' : 'text-gray-300 dark:text-gray-600' %>" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                <% end %>
                <p class="ml-1 text-xs text-gray-500 dark:text-gray-400"><%= 3.5 + (i % 3) * 0.5 %> (<%= 10 + i * 5 %>)</p>
              </div>
            </div>

            <h3 class="mt-2 text-base font-medium text-gray-900 dark:text-white">
              <a href="#">
                <% case @category %>
                <% when 'electronics' %>
                  <%= ['Wireless Earbuds', 'Smart Watch', 'Bluetooth Speaker', 'USB-C Hub', 'Wireless Charger', 'Power Bank', 'Laptop Stand', 'Wireless Mouse'][i % 8] %>
                <% when 'fashion' %>
                  <%= ['Premium T-Shirt', 'Slim Fit Jeans', 'Casual Sneakers', 'Leather Wallet', 'Cotton Dress', 'Fitted Cap', 'Stylish Backpack', 'Sports Jacket'][i % 8] %>
                <% when 'groceries' %>
                  <%= ['Organic Bananas', 'Free-Range Eggs', 'Whole Grain Bread', 'Fresh Milk', 'Premium Coffee', 'Assorted Vegetables', 'Local Honey', 'Grass-Fed Beef'][i % 8] %>
                <% when 'local' %>
                  <%= ['Handcrafted Soap', 'Artisan Candle', 'Local Artwork', 'Handwoven Basket', 'Specialty Jam', 'Wooden Cutting Board', 'Ceramic Mug', 'Woven Scarf'][i % 8] %>
                <% else %>
                  Product Name <%= i + 1 %>
                <% end %>
              </a>
            </h3>

            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400 line-clamp-2">
              High-quality product with excellent features and long-lasting durability. Perfect for everyday use.
            </p>

            <div class="mt-3 flex items-center justify-between">
              <p class="text-lg font-bold text-gray-900 dark:text-white">
                <% case @category %>
                <% when 'electronics' %>
                  GHS <%= [249, 199, 129, 79, 149, 299, 189, 59][i % 8] %>.99
                <% when 'fashion' %>
                  GHS <%= [89, 119, 149, 49, 129, 39, 119, 199][i % 8] %>.99
                <% when 'groceries' %>
                  GHS <%= [5, 12, 4, 3, 15, 8, 18, 25][i % 8] %>.99
                <% when 'local' %>
                  GHS <%= [29, 35, 149, 45, 12, 65, 25, 55][i % 8] %>.99
                <% else %>
                  GHS <%= 99 + i * 25 %>.99
                <% end %>
              </p>

              <button class="flex items-center justify-center p-2 text-indigo-600 bg-indigo-100 rounded-full hover:bg-indigo-200 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Pagination -->
    <div class="mt-12 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 pt-6">
      <div class="flex flex-1 justify-between sm:hidden">
        <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700">
          Previous
        </a>
        <a href="#" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700">
          Next
        </a>
      </div>
      <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
        <div>
          <p class="text-sm text-gray-700 dark:text-gray-300">
            Showing <span class="font-medium">1</span> to <span class="font-medium">8</span> of <span class="font-medium">24</span> results
          </p>
        </div>
        <div>
          <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
            <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700">
              <span class="sr-only">Previous</span>
              <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
              </svg>
            </a>
            <a href="#" aria-current="page" class="z-10 bg-indigo-50 dark:bg-indigo-900 border-indigo-500 dark:border-indigo-500 text-indigo-600 dark:text-indigo-200 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
              1
            </a>
            <a href="#" class="bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
              2
            </a>
            <a href="#" class="bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
              3
            </a>
            <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700">
              <span class="sr-only">Next</span>
              <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
              </svg>
            </a>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <!-- Related Categories -->
  <div class="bg-gray-50 dark:bg-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
        Related Categories
      </h2>

      <div class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6">
        <% # Generate related categories based on the current category %>
        <%
          related_categories = []
          case @category
          when 'electronics'
            related_categories = ['Smartphones', 'Laptops', 'Audio', 'Smart Home', 'Accessories', 'Cameras']
          when 'fashion'
            related_categories = ['Men\'s Clothing', 'Women\'s Clothing', 'Shoes', 'Accessories', 'Watches', 'Bags']
          when 'groceries'
            related_categories = ['Fresh Produce', 'Dairy', 'Bakery', 'Meat & Seafood', 'Beverages', 'Snacks']
          when 'local'
            related_categories = ['Handmade', 'Food & Drink', 'Art', 'Home Goods', 'Jewelry', 'Wellness']
          else
            related_categories = ['Electronics', 'Fashion', 'Home & Garden', 'Beauty', 'Sports', 'Books']
          end
        %>

        <% related_categories.each do |category| %>
          <a href="#" class="flex flex-col items-center p-4 bg-white dark:bg-gray-900 rounded-lg shadow-sm hover:shadow-md transition-shadow">
            <span class="text-sm font-medium text-gray-900 dark:text-gray-100"><%= category %></span>
          </a>
        <% end %>
      </div>
    </div>
  </div>
</div>