<%# Enhanced Bills View with Creative Design %>
<div class="bg-gray-50 dark:bg-gray-900 min-h-screen" data-controller="bills">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">

    <!-- Enhanced Header with Dynamic Gradient Background -->
    <div class="mb-8 bg-gradient-to-r from-primary-600 to-primary-800 dark:from-primary-700 dark:to-primary-900 rounded-2xl shadow-lg overflow-hidden">
      <div class="relative p-6 md:p-8">
        <!-- Decorative elements with subtle animation -->
        <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mt-32 -mr-32 blur-3xl animate-pulse-slow"></div>
        <div class="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full -mb-24 -ml-24 blur-2xl animate-float"></div>

        <!-- Decorative icons in background -->
        <div class="absolute top-1/4 right-1/4 text-white/5 transform rotate-12 hidden lg:block">
          <%= icon("receipt", class: "w-32 h-32") %>
        </div>
        <div class="absolute bottom-1/4 left-1/3 text-white/5 transform -rotate-12 hidden lg:block">
          <%= icon("credit-card", class: "w-24 h-24") %>
        </div>

        <div class="relative flex flex-col md:flex-row md:items-center md:justify-between">
          <div class="flex items-center mb-6 md:mb-0">
            <a href="<%= wallet_path %>" class="flex items-center justify-center w-10 h-10 rounded-full bg-white/20 text-white hover:bg-white/30 transition-all duration-300 mr-4 shadow-md hover:scale-105">
              <%= icon("arrow-left", class: "w-5 h-5") %>
            </a>
            <div>
              <h1 class="text-2xl md:text-3xl font-bold text-white">Bill Payments</h1>
              <p class="mt-2 text-white/80 max-w-xl">
                Pay your bills quickly and securely with instant confirmation
              </p>
            </div>
          </div>

          <!-- Enhanced Quick action buttons -->
          <div class="flex flex-wrap gap-3">
            <a href="<%= wallet_path %>" class="flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium transition-all duration-300 shadow-sm hover:shadow backdrop-blur-sm border border-white/10">
              <%= icon("home", class: "w-4 h-4 mr-2") %>
              Dashboard
            </a>
            <a href="<%= transactions_wallet_path %>" class="flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium transition-all duration-300 shadow-sm hover:shadow backdrop-blur-sm border border-white/10">
              <%= icon("history", class: "w-4 h-4 mr-2") %>
              History
            </a>
            <a href="#saved-bills" class="flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium transition-all duration-300 shadow-sm hover:shadow backdrop-blur-sm border border-white/10">
              <%= icon("star", class: "w-4 h-4 mr-2") %>
              Saved Bills
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Search and Filter Section -->
    <div class="mb-8 flex flex-col sm:flex-row gap-4 items-center justify-between">
      <!-- Search Box -->
      <div class="relative w-full sm:w-auto flex-grow max-w-md">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <%= icon("search", class: "h-5 w-5 text-gray-400") %>
        </div>
        <input type="text" placeholder="Search for bills..." class="block w-full pl-10 pr-10 py-3 border-gray-300 dark:border-gray-600 dark:bg-gray-800/50 dark:text-white rounded-xl focus:ring-primary-500 focus:border-primary-500 shadow-sm" data-bills-target="searchInput">
        <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300" data-action="bills#clearSearch">
          <%= icon("x", class: "h-5 w-5") %>
        </button>
      </div>

      <!-- Filter Dropdown -->
      <div class="relative">
        <button type="button" class="flex items-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" data-bills-target="filterButton" data-action="bills#toggleFilterMenu">
          <%= icon("filter", class: "w-5 h-5 mr-2 text-gray-500 dark:text-gray-400") %>
          <span class="text-gray-700 dark:text-gray-300 font-medium">Filter</span>
          <%= icon("chevron-down", class: "w-4 h-4 ml-2 text-gray-500 dark:text-gray-400") %>
        </button>

        <!-- Filter Menu -->
        <div class="absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 z-10 hidden transform origin-top-right transition-all duration-200" data-bills-target="filterMenu">
          <div class="p-3">
            <div class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Filter by category</div>
            <div class="space-y-1">
              <button type="button" class="w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 active" data-bills-target="filterButton" data-category="all" data-action="bills#filterByCategory">
                All Categories
              </button>
              <button type="button" class="w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300" data-bills-target="filterButton" data-category="utilities" data-action="bills#filterByCategory">
                Utilities
              </button>
              <button type="button" class="w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300" data-bills-target="filterButton" data-category="telecom" data-action="bills#filterByCategory">
                Telecom
              </button>
              <button type="button" class="w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300" data-bills-target="filterButton" data-category="financial" data-action="bills#filterByCategory">
                Financial
              </button>
              <button type="button" class="w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300" data-bills-target="filterButton" data-category="education" data-action="bills#filterByCategory">
                Education
              </button>
            </div>

            <div class="border-t border-gray-200 dark:border-gray-700 my-2 pt-2">
              <label class="flex items-center justify-between cursor-pointer px-3 py-2 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                <span class="text-gray-700 dark:text-gray-300">Show saved bills only</span>
                <div class="relative">
                  <input type="checkbox" class="sr-only" data-bills-target="savedBillsToggle" data-action="bills#toggleSavedBills">
                  <div class="block w-10 h-6 bg-gray-300 dark:bg-gray-600 rounded-full"></div>
                  <div class="dot absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition"></div>
                </div>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- No Results Message (hidden by default) -->
    <div class="hidden text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 mb-8" data-bills-target="noResults">
      <div class="w-16 h-16 mx-auto rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4 text-gray-500 dark:text-gray-400">
        <%= icon("search", class: "w-8 h-8") %>
      </div>
      <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2">No bills found</h3>
      <p class="text-gray-500 dark:text-gray-400 max-w-md mx-auto">We couldn't find any bills matching your search. Try different keywords or browse all categories.</p>
    </div>

    <!-- Featured Bills Section -->
    <div class="mb-10" data-bills-target="featuredBills">
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="text-xl font-bold text-gray-900 dark:text-white flex items-center">
            <%= icon("star", class: "w-5 h-5 mr-2 text-yellow-500") %>
            Featured Bills
          </h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Quick access to your most common bills</p>
        </div>
      </div>

      <!-- Featured Bills Cards -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <!-- Electricity Bill (Featured) -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 group hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 relative">
          <div class="absolute top-3 right-3 z-10">
            <button type="button" class="w-8 h-8 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
              <%= icon("star", class: "w-5 h-5") %>
            </button>
          </div>
          <div class="h-24 bg-gradient-to-r from-yellow-500 to-amber-600 relative overflow-hidden">
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="w-32 h-32 rounded-full bg-white/10 absolute -top-10 -right-10"></div>
              <div class="w-24 h-24 rounded-full bg-white/10 absolute -bottom-10 -left-10"></div>
              <%= icon("zap", class: "w-12 h-12 text-white/90 relative z-10 transform -translate-y-2") %>
            </div>
          </div>
          <div class="p-4">
            <h3 class="font-bold text-gray-900 dark:text-white mb-1">Electricity Bill</h3>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">Pay for prepaid or postpaid electricity</p>
            <a href="<%= pay_bill_path(type: 'electricity') %>" class="w-full flex items-center justify-center px-4 py-2 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 rounded-lg text-sm font-medium hover:bg-yellow-100 dark:hover:bg-yellow-900/30 transition-colors">
              <%= icon("credit-card", class: "w-4 h-4 mr-2") %>
              Pay Now
            </a>
          </div>
        </div>

        <!-- Water Bill (Featured) -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 group hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 relative">
          <div class="absolute top-3 right-3 z-10">
            <button type="button" class="w-8 h-8 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
              <%= icon("star", class: "w-5 h-5") %>
            </button>
          </div>
          <div class="h-24 bg-gradient-to-r from-blue-500 to-cyan-600 relative overflow-hidden">
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="w-32 h-32 rounded-full bg-white/10 absolute -top-10 -right-10"></div>
              <div class="w-24 h-24 rounded-full bg-white/10 absolute -bottom-10 -left-10"></div>
              <%= icon("droplets", class: "w-12 h-12 text-white/90 relative z-10 transform -translate-y-2") %>
            </div>
          </div>
          <div class="p-4">
            <h3 class="font-bold text-gray-900 dark:text-white mb-1">Water Bill</h3>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">Pay your water utility bills easily</p>
            <a href="<%= pay_bill_path(type: 'water') %>" class="w-full flex items-center justify-center px-4 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors">
              <%= icon("credit-card", class: "w-4 h-4 mr-2") %>
              Pay Now
            </a>
          </div>
        </div>

        <!-- Internet/Data (Featured) -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 group hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 relative">
          <div class="absolute top-3 right-3 z-10">
            <button type="button" class="w-8 h-8 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
              <%= icon("star", class: "w-5 h-5") %>
            </button>
          </div>
          <div class="h-24 bg-gradient-to-r from-purple-500 to-indigo-600 relative overflow-hidden">
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="w-32 h-32 rounded-full bg-white/10 absolute -top-10 -right-10"></div>
              <div class="w-24 h-24 rounded-full bg-white/10 absolute -bottom-10 -left-10"></div>
              <%= icon("wifi", class: "w-12 h-12 text-white/90 relative z-10 transform -translate-y-2") %>
            </div>
          </div>
          <div class="p-4">
            <h3 class="font-bold text-gray-900 dark:text-white mb-1">Internet/Data</h3>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">Purchase internet data bundles</p>
            <a href="<%= pay_bill_path(type: 'internet') %>" class="w-full flex items-center justify-center px-4 py-2 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg text-sm font-medium hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors">
              <%= icon("credit-card", class: "w-4 h-4 mr-2") %>
              Pay Now
            </a>
          </div>
        </div>

        <!-- Airtime (Featured) -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700 group hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 relative">
          <div class="absolute top-3 right-3 z-10">
            <button type="button" class="w-8 h-8 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
              <%= icon("star", class: "w-5 h-5") %>
            </button>
          </div>
          <div class="absolute top-0 left-0 bg-green-500 text-white text-xs px-3 py-1 rounded-br-lg shadow-md z-10">
            New
          </div>
          <div class="h-24 bg-gradient-to-r from-green-500 to-emerald-600 relative overflow-hidden">
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="w-32 h-32 rounded-full bg-white/10 absolute -top-10 -right-10"></div>
              <div class="w-24 h-24 rounded-full bg-white/10 absolute -bottom-10 -left-10"></div>
              <%= icon("phone", class: "w-12 h-12 text-white/90 relative z-10 transform -translate-y-2") %>
            </div>
          </div>
          <div class="p-4">
            <h3 class="font-bold text-gray-900 dark:text-white mb-1">Airtime</h3>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">Buy airtime for any mobile network</p>
            <a href="<%= wallet_airtime_path %>" class="w-full flex items-center justify-center px-4 py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-lg text-sm font-medium hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors">
              <%= icon("credit-card", class: "w-4 h-4 mr-2") %>
              Buy Now
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- All Bill Categories -->
    <div class="mb-10">
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="text-xl font-bold text-gray-900 dark:text-white">All Categories</h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Browse all available bill payment options</p>
        </div>
      </div>

      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" data-bills-target="billsContainer">
        <!-- Electricity Bill -->
        <a href="<%= pay_bill_path(type: 'electricity') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="utilities" data-bill-id="electricity">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-yellow-500 to-amber-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("zap", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-yellow-600 dark:group-hover:text-yellow-400 transition-colors duration-300">Electricity</span>
        </a>

        <!-- Water Bill -->
        <a href="<%= pay_bill_path(type: 'water') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="utilities" data-bill-id="water">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("droplets", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300">Water</span>
        </a>

        <!-- Internet/Data -->
        <a href="<%= pay_bill_path(type: 'internet') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="telecom" data-bill-id="internet">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("wifi", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300">Internet</span>
        </a>

        <!-- Airtime -->
        <a href="<%= wallet_airtime_path %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="telecom" data-bill-id="airtime">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("phone", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors duration-300">Airtime</span>
          <span class="absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full shadow-md">New</span>
        </a>

        <!-- TV Subscription -->
        <a href="<%= pay_bill_path(type: 'tv') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="telecom" data-bill-id="tv">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-red-500 to-rose-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("tv", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors duration-300">TV</span>
        </a>

        <!-- Gas Bill -->
        <a href="<%= pay_bill_path(type: 'gas') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="utilities" data-bill-id="gas">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("flame", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors duration-300">Gas</span>
        </a>

        <!-- Insurance -->
        <a href="<%= pay_bill_path(type: 'insurance') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="financial" data-bill-id="insurance">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-indigo-500 to-blue-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("shield-check", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors duration-300">Insurance</span>
        </a>

        <!-- Loan Repayment -->
        <a href="<%= pay_bill_path(type: 'loan') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="financial" data-bill-id="loan">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("landmark", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-emerald-600 dark:group-hover:text-emerald-400 transition-colors duration-300">Loan</span>
        </a>

        <!-- Mortgage -->
        <a href="<%= pay_bill_path(type: 'mortgage') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="financial" data-bill-id="mortgage">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("building", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-pink-600 dark:group-hover:text-pink-400 transition-colors duration-300">Mortgage</span>
        </a>

        <!-- School Fees -->
        <a href="<%= pay_bill_path(type: 'education') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="education" data-bill-id="education">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("book-open", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-cyan-600 dark:group-hover:text-cyan-400 transition-colors duration-300">School Fees</span>
        </a>

        <!-- Other Bills -->
        <a href="<%= pay_bill_path(type: 'other') %>" class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 flex flex-col items-center justify-center hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 dark:border-gray-700 relative" data-bills-target="categoryCard" data-category="other" data-bill-id="other">
          <button type="button" class="absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-400 hover:text-yellow-500 transition-colors star-button" data-action="bills#saveBill">
            <%= icon("star", class: "w-4 h-4") %>
          </button>
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-gray-500 to-slate-600 flex items-center justify-center mb-3 text-white shadow-sm group-hover:shadow-md transition-all duration-300">
            <%= icon("file-text", class: "w-7 h-7") %>
          </div>
          <span class="text-sm font-medium text-gray-900 dark:text-white text-center group-hover:text-gray-600 dark:group-hover:text-gray-400 transition-colors duration-300">Other</span>
        </a>
      </div>
    </div>

    <!-- Saved Bills Section (initially hidden, shown when bills are saved) -->
    <div class="mb-10" id="saved-bills">
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="text-xl font-bold text-gray-900 dark:text-white flex items-center">
            <%= icon("bookmark", class: "w-5 h-5 mr-2 text-primary-500") %>
            Saved Bills
          </h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Your favorite bills for quick access</p>
        </div>
      </div>

      <!-- Saved Bills Cards (dynamically populated by JavaScript) -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-8 border border-gray-100 dark:border-gray-700 text-center saved-bills-container">
        <div class="w-16 h-16 mx-auto rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4 text-gray-400 dark:text-gray-500">
          <%= icon("star", class: "w-8 h-8") %>
        </div>
        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2">No saved bills yet</h3>
        <p class="text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto">Click the star icon on any bill to save it for quick access</p>
      </div>
    </div>

    <!-- Recent Bill Payments Section -->
    <div class="mb-10" data-bills-target="recentPayments">
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="text-xl font-bold text-gray-900 dark:text-white flex items-center">
            <%= icon("clock", class: "w-5 h-5 mr-2 text-primary-500") %>
            Recent Bill Payments
          </h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Your recent bill payment history</p>
        </div>
        <a href="<%= transactions_wallet_path %>" class="text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 flex items-center">
          View All
          <%= icon("chevron-right", class: "w-4 h-4 ml-1") %>
        </a>
      </div>

      <% if @recent_bill_payments.present? && @recent_bill_payments.any? %>
        <!-- Recent Payments Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <% @recent_bill_payments.take(3).each do |payment| %>
            <%
              # Set gradient colors based on bill type
              case payment.bill_type
              when 'electricity'
                gradient_class = "bg-gradient-to-r from-yellow-500 to-amber-600"
                icon_name = "zap"
                bill_name = "Electricity Bill"
              when 'water'
                gradient_class = "bg-gradient-to-r from-blue-500 to-cyan-600"
                icon_name = "droplets"
                bill_name = "Water Bill"
              when 'internet'
                gradient_class = "bg-gradient-to-r from-purple-500 to-indigo-600"
                icon_name = "wifi"
                bill_name = "Internet/Data"
              when 'airtime'
                gradient_class = "bg-gradient-to-r from-green-500 to-emerald-600"
                icon_name = "phone"
                bill_name = "Airtime Purchase"
              when 'tv'
                gradient_class = "bg-gradient-to-r from-red-500 to-rose-600"
                icon_name = "tv"
                bill_name = "TV Subscription"
              when 'gas'
                gradient_class = "bg-gradient-to-r from-orange-500 to-red-600"
                icon_name = "flame"
                bill_name = "Gas Bill"
              when 'insurance'
                gradient_class = "bg-gradient-to-r from-indigo-500 to-blue-600"
                icon_name = "shield-check"
                bill_name = "Insurance"
              when 'loan'
                gradient_class = "bg-gradient-to-r from-emerald-500 to-teal-600"
                icon_name = "landmark"
                bill_name = "Loan Repayment"
              when 'mortgage'
                gradient_class = "bg-gradient-to-r from-pink-500 to-rose-600"
                icon_name = "building"
                bill_name = "Mortgage"
              else
                gradient_class = "bg-gradient-to-r from-gray-500 to-slate-600"
                icon_name = "file-text"
                bill_name = "Other Bill"
              end

              # Set status colors and styles
              if payment.status.to_s == 'completed'
                status_bg = "bg-green-50 dark:bg-green-900/20"
                status_text = "text-green-700 dark:text-green-300"
                status_label = "Successful"
              elsif payment.status.to_s == 'pending'
                status_bg = "bg-amber-50 dark:bg-amber-900/20"
                status_text = "text-amber-700 dark:text-amber-300"
                status_label = "Pending"
              else
                status_bg = "bg-red-50 dark:bg-red-900/20"
                status_text = "text-red-700 dark:text-red-300"
                status_label = "Failed"
              end
            %>
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-gray-700 hover:shadow-md transition-all duration-300 transform hover:-translate-y-1">
              <div class="p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between">
                <div class="flex items-center">
                  <div class="w-10 h-10 rounded-full <%= gradient_class.sub('gradient-to-r', 'gradient-to-br') %> flex items-center justify-center text-white mr-3">
                    <%= icon(icon_name, class: "w-5 h-5") %>
                  </div>
                  <div>
                    <h3 class="font-medium text-gray-900 dark:text-white"><%= bill_name %></h3>
                    <p class="text-xs text-gray-500 dark:text-gray-400"><%= payment.provider %></p>
                  </div>
                </div>
                <div class="<%= status_bg %> px-2 py-1 rounded text-xs font-medium <%= status_text %>">
                  <%= status_label %>
                </div>
              </div>
              <div class="p-4">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm text-gray-500 dark:text-gray-400">Amount</span>
                  <span class="text-base font-bold text-gray-900 dark:text-white">â‚µ<%= number_with_delimiter(payment.amount, delimiter: ',') %></span>
                </div>
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm text-gray-500 dark:text-gray-400">Date</span>
                  <span class="text-sm text-gray-700 dark:text-gray-300"><%= payment.created_at.strftime("%b %d, %Y") %></span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-500 dark:text-gray-400">Reference</span>
                  <span class="text-sm text-gray-700 dark:text-gray-300"><%= payment.account_number %></span>
                </div>
              </div>
              <div class="p-3 bg-gray-50 dark:bg-gray-750 border-t border-gray-100 dark:border-gray-700">
                <a href="#" class="text-xs text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 flex items-center justify-center">
                  View Receipt
                  <%= icon("external-link", class: "w-3 h-3 ml-1") %>
                </a>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <!-- Empty State -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-8 border border-gray-100 dark:border-gray-700 text-center">
          <div class="w-16 h-16 mx-auto rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4 text-gray-400 dark:text-gray-500">
            <%= icon("receipt", class: "w-8 h-8") %>
          </div>
          <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2">No recent bill payments</h3>
          <p class="text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto">Your payment history will appear here once you start paying bills</p>
          <a href="<%= pay_bill_path(type: 'electricity') %>" class="inline-flex items-center px-4 py-2 rounded-lg font-medium shadow-sm bg-primary-600 hover:bg-primary-700 text-white transition-colors">
            <%= icon("plus-circle", class: "w-4 h-4 mr-2") %>
            Make Your First Payment
          </a>
        </div>
      <% end %>
    </div>

    <!-- Quick Tips Section -->
    <div class="mb-10">
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="text-xl font-bold text-gray-900 dark:text-white flex items-center">
            <%= icon("lightbulb", class: "w-5 h-5 mr-2 text-yellow-500") %>
            Quick Tips
          </h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Helpful information for bill payments</p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- Tip 1 -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-gray-700">
          <div class="h-3 bg-gradient-to-r from-blue-500 to-indigo-600"></div>
          <div class="p-5">
            <h3 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center">
              <%= icon("clock", class: "w-4 h-4 mr-2 text-blue-500") %>
              Schedule Recurring Payments
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Set up automatic payments for your regular bills to avoid late fees and service interruptions.
            </p>
            <a href="#" class="mt-3 inline-flex items-center text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">
              Learn how
              <%= icon("chevron-right", class: "w-3 h-3 ml-1") %>
            </a>
          </div>
        </div>

        <!-- Tip 2 -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-gray-700">
          <div class="h-3 bg-gradient-to-r from-green-500 to-emerald-600"></div>
          <div class="p-5">
            <h3 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center">
              <%= icon("bell", class: "w-4 h-4 mr-2 text-green-500") %>
              Set Bill Payment Reminders
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Never miss a payment deadline by setting up timely reminders for your upcoming bills.
            </p>
            <a href="#" class="mt-3 inline-flex items-center text-xs font-medium text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300">
              Set reminders
              <%= icon("chevron-right", class: "w-3 h-3 ml-1") %>
            </a>
          </div>
        </div>

        <!-- Tip 3 -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-gray-700">
          <div class="h-3 bg-gradient-to-r from-purple-500 to-indigo-600"></div>
          <div class="p-5">
            <h3 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center">
              <%= icon("star", class: "w-4 h-4 mr-2 text-purple-500") %>
              Save Favorite Bills
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Click the star icon on any bill to save it for quick access in the "Saved Bills" section.
            </p>
            <a href="#saved-bills" class="mt-3 inline-flex items-center text-xs font-medium text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300">
              View saved bills
              <%= icon("chevron-right", class: "w-3 h-3 ml-1") %>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Custom CSS for animations -->
  <style>
    .animate-in {
      animation: fadeInUp 0.5s ease forwards;
    }

    .animate-pulse-slow {
      animation: pulse 6s infinite;
    }

    .animate-float {
      animation: float 8s ease-in-out infinite;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 0.3;
      }
      50% {
        opacity: 0.5;
      }
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-15px);
      }
    }

    /* Toggle switch styling */
    input[type="checkbox"].sr-only ~ .dot {
      transform: translateX(0);
    }

    input[type="checkbox"].sr-only:checked ~ .dot {
      transform: translateX(100%);
      background-color: #fff;
    }

    input[type="checkbox"].sr-only:checked ~ .block {
      background-color: #3b82f6;
    }

    /* Star button active state */
    .is-saved .star-button {
      color: #f59e0b !important;
    }

    /* Filter button active state */
    .filter-button.active {
      background-color: #f3f4f6;
      color: #3b82f6;
    }
  </style>
</div>
